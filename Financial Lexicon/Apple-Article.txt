Apple Inc. largely didn’t disappoint, its fiscal third quarter earnings mostly crushing expectations and sending its stock soaring over 4 percent to $217.35 in afterhours trading Tuesday. The company said Q3 2019 was its best yet despite a 12 percent plunge in iPhone sales.

Apple’s stock jumped 2 percent immediately after the company revealed its revenue of $53.8 billion (up 1 percent) beat the $53.39 billion Refinitiv consensus. Earnings per share for Q3 stood at $2.18 and handily exceeded the Refinitiv consensus estimate of $2.10.

The strong numbers marked a return to growth for Apple after two disappointing quarters that saw operations reel from Trump’s trade war against China where most of Apple’s devices are made. Analysts said the upbeat data indicates demand for Apple products is stabilizing as the company enters the critical second half of the year with its lucrative Christmas shopping season.

“This was our biggest June quarter ever -- driven by all-time record revenue from services, accelerating growth from wearables, strong performance from iPad and Mac and significant improvement in iPhone trends,” said CEO Tim Cook.

Actual services revenue came in at $11.46 billion versus the $11.61 billion estimated by FactSet.

Mac revenue came in above expectations, while iPad and Services were a tad below. Wearables, home and accessories posted revenues above the $4.59 billion consensus.

On the other hand, iPhone sales fell 12 percent year-on-year to $25.99 billion, falling somewhat short of the consensus $26.31 billion estimated by FactSet. The Q3 number is down from $29.9 billion in revenue on 41.3 million iPhone units sold in Q3 2018.

“We’re very excited to report a return to growth for the quarter, and it’s a record revenue for Q3 as well, best we’ve ever had,” said Cook to CNBC.

“Great services quarter, unbelievable wearables quarter, significant progress on iPhone, and off-the-charts significant progress on China, compared to where we were the previous quarter.”

Apple issued its Q4 revenue guidance at $61 billion to $64 billion versus $60.98 billion by Refinitiv consensus estimates. It projected gross margin between 37.5 percent and 38.5 percent and operating expenses between $8.7 billion and $8.8 billion.

Apple CFO Luca Maestri said the company’s year-over-year business performance improved compared to the March quarter and drove strong operating cash flow of $11.6 billion.

“We returned over $21 billion to shareholders during the quarter, including $17 billion through open market repurchases of almost 88 million Apple shares, and $3.6 billion in dividends and equivalents.”

Apple’s board of directors declared a cash dividend of $0.77 per share of common stock. The dividend is payable on Aug. 15 to shareholders of record as of the close of business on Aug. 12.